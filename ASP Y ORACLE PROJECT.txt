FOR CREATE ASP.NET APLICATION WEB (RAZOR PAGES)


sqlplus sys as sysdba
123
------------------------------
ALTER SESSION SET CONTAINER = XEPDB1;


CREATE USER dudegodb IDENTIFIED BY 123;

GRANT CONNECT, RESOURCE TO dudegodb;

sqlplus sys/123@hostname:port/XEPDB1

ALTER SESSION SET CONTAINER = XEPDB1;xx




CREATE TABLE Tb_customer (
    id_customer INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    dui_customer NVARCHAR2(50) NOT NULL,
    driving_lic NVARCHAR2(50) NOT NULL,
    name_customer NVARCHAR2(100) NOT NULL,
    phone_number NVARCHAR2(20),
    address NVARCHAR2(255)
)TABLESPACE dudegospaceu;

CREATE TABLE Tb_cars (
    id_car INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    number_plate NVARCHAR2(20) NOT NULL,
    brand NVARCHAR2(50) NOT NULL,
    model NVARCHAR2(50) NOT NULL,
    color NVARCHAR2(20),
    year INT NOT NULL
)TABLESPACE dudegospaceu;

CREATE TABLE Tb_branches (
    id_branch INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name_branch NVARCHAR2(100) NOT NULL,
    address NVARCHAR2(255),
    phone_number_branch NVARCHAR2(20)
)TABLESPACE dudegospaceu;

CREATE TABLE Tb_salesperson (
    id_salesperson INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name_salesperson NVARCHAR2(100) NOT NULL,
    code_salesperson NVARCHAR2(50) NOT NULL
)TABLESPACE dudegospaceu;

CREATE TABLE Tb_invoice (
    id_invoice INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    invoice_number NVARCHAR2(50) NOT NULL,
    id_customer INT,
    id_branch INT,
    id_salesperson INT,
    FOREIGN KEY (id_customer) REFERENCES Tb_customer(id_customer),
    FOREIGN KEY (id_branch) REFERENCES Tb_branches(id_branch),
    FOREIGN KEY (id_salesperson) REFERENCES Tb_salesperson(id_salesperson)
)TABLESPACE dudegospaceu;

CREATE TABLE Tb_invoice_details (
    id_invoice_details INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    id_invoice INT,
    id_car INT,
    day_duration INT NOT NULL,
    price_day NUMBER(10, 2) NOT NULL,
    rental_deposit NUMBER(10, 2) NOT NULL,
    FOREIGN KEY (id_invoice) REFERENCES Tb_invoice(id_invoice),
    FOREIGN KEY (id_car) REFERENCES Tb_cars(id_car)
)TABLESPACE dudegospaceu;


crear table space:

CREATE TABLESPACE dudegospaceu
    DATAFILE 'dudegospaceu.dbf' SIZE 100M
    AUTOEXTEND ON
    NEXT 10M
    MAXSIZE UNLIMITED
    LOGGING
    DEFAULT STORAGE ( INITIAL 10M NEXT 10M );




asignar tablespace:

ALTER USER dudegodb DEFAULT TABLESPACE dudegospaceu;

dar permisos desde usuarui sys 
GRANT UNLIMITED TABLESPACE ON dudegospaceu TO dudegodb;

-***************************************************************
INSTALL NUGET

MICROSOFT.ENTITYFRAMEWORKCORE
Microsoft.EntityFrameworkCore.Design
Microsoft.EntityFrameworkCore.Tools
Microsoft.VisualStudio.WebCodeGeneration.Design
Oracle.EntityFrameworkCore
Oracle.ManagedDataAccess.Core

------------------------------------
CONFIG STRING CONNECTION JSON

    "DefaultConnection": "User Id=dudegodb;Password=123;Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=XEPDB1)))"


----------------------------------------
CONFIG Program.cs

using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.Configuration;
using Microsoft.EntityFrameworkCore;
using dudego.Models;

var builder = WebApplication.CreateBuilder(args);


// Add services to the container.
builder.Services.AddRazorPages();
// Configurar la conexi√≥n a la base de datos Oracle
var connectionString = builder.Configuration.GetConnectionString("DefaultConnection");
builder.Services.AddDbContext<ModelContext>(options =>
    options.UseOracle(connectionString));
var app = builder.Build();

// Configure the HTTP request pipeline.
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseRouting();

app.UseAuthorization();

app.MapRazorPages();

app.Run();
-----------------------------------------------------------------

Run in console // create new context with scaffolding oracle models

dotnet ef dbcontext scaffold "User Id=dudegodb;Password=123;Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=XEPDB1)))" Oracle.EntityFrameworkCore -o Models --project dudegomvc

----------------------------------------------------------------

if requiered, change "context for error"














**********************************
otros
ver usuarios 
SELECT username FROM dba_users;

SELECT username FROM all_users;

SHOW PDBS;



